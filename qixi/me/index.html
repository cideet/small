<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8"/>
    <title>Title</title>
    <meta name="keywords" content=""/>
    <meta name="description" content=""/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <link type="text/css" rel="stylesheet" href="css/style.css"/>
    <link type="text/css" rel="stylesheet" href="css/page-a.css"/>
    <link type="text/css" rel="stylesheet" href="css/page-b.css"/>
    <link type="text/css" rel="stylesheet" href="css/page-c.css"/>
</head>
<body>

<div id="content">
    <ul class="content-wrap">
        <li>
            <div class="a-background">
                <div class="a-background-top"></div>
                <div class="a-background-middle"></div>
                <div class="a-background-bottom"></div>
            </div>
        </li>
        <li>页面2</li>
        <li>页面3</li>
    </ul>
    <div id="boy" class="boy"></div>
</div>

<div class="button">
    <button>切换页面</button>
    <button>小孩动起来</button>
    <button>小孩向前走</button>
    <button>暂停</button>
    <button>异步加载</button>
</div>

<script src="js/jquery.min.js"></script>
<script src="js/jquery.transit.js"></script>
<script src="js/jquery.mousewheel.js"></script>
<script src="js/swipe.js"></script>
<script src="js/qixi.js"></script>
<script>
    $boy = $('#boy');

    //动画切换到第三屏
    $("button").eq(0).click(function () {
        swipe.scrollTo($("#content").width() * 2, 3);
    });
    //小孩的脚动起来
    $("button").eq(1).click(function () {
        slowWalk();
    });
    //小孩走路
    $("button").eq(2).click(function () {
        var disX = calculateDist('x', 0.5);
        var disY = calculateDist('y', 0.5);
        walkRun(10000, disX, disY);
    });
    //小孩停住
    $("button").eq(3).click(function () {
        var left = $boy.css('left');
        $boy.css('left', left);
        $boy.addClass('pause-walk');
    });
    //异步编辑
    $("button").eq(4).click(function () {
        var disX = calculateDist('x', 0.3);
        $boy.animate({left: '300px'}, 1000, function () {
            $boy.animate({left: '800px'}, 500,function(){
                $boy.animate({left: '1200px'},5000);
            });
        });
//        function animate1(){
//            var dtd = $.Deferred();     //生成Deferred对象
//            $boy.animate({left: '300px'},1000,function(){
//                dtd.resolve();          // 改变Deferred对象的执行状态
//            });
//            return dtd;
//        }
//        function animate2(){
//            var dtd = $.Deferred();
//            $boy.animate({left: '800px'},500,function(){
//                dtd.resolve();
//            });
//            return dtd;
//        }
//        function animate3(){
//            var dtd = $.Deferred();
//            $boy.animate({left: '1200px'},5000,function(){
//                dtd.resolve();
//            });
//            return dtd;
//        }
//        animate1().then(function(){
//            animate2();
//        }).then(function(){
//            animate3();
//        })
    });

    //监听鼠标中键滑动
    $(document).on('mousewheel', function (event) {
        swipe.mousewheel(event, 50);
        $boy.addClass("slow-walk");
    });

</script>
</body>
</html>
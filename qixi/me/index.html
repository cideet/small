<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8"/>
    <title>Title</title>
    <meta name="keywords" content=""/>
    <meta name="description" content=""/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <link type="text/css" rel="stylesheet" href="css/style.css"/>
    <link type="text/css" rel="stylesheet" href="css/page-a.css"/>
    <link type="text/css" rel="stylesheet" href="css/page-b.css"/>
    <link type="text/css" rel="stylesheet" href="css/page-c.css"/>
</head>
<body>

<div id="content">
    <ul class="content-wrap">
        <li>
            <div class="a-background">
                <div class="a-background-top"></div>
                <div class="a-background-middle"></div>
                <div class="a-background-bottom"></div>
            </div>
        </li>
        <li>页面2</li>
        <li>页面3</li>
    </ul>
    <div id="boy" class="boy"></div>
</div>

<div class="button">
    <button>切换页面</button>
    <button>小孩动起来</button>
    <button>小孩向前走</button>
</div>

<script src="js/jquery.min.js"></script>
<script src="js/jquery.transit.js"></script>
<script src="js/jquery.mousewheel.js"></script>
<script src="js/swipe.js"></script>
<script>
    var swipe = Swipe($("#content"));
    function getDataByClass(className) {
        var $element = $('' + className + '');
        return {
            'height': $element.height(),
            'top': $element.get(0).getBoundingClientRect().top
            //'top': $element.position().top
        }
    }
    //路的Y轴
    var pathY = function () {
        var data = getDataByClass(".a-background-middle");
        return data.top + data.height / 2
    }();
    //修正小男孩的位置
    //路的中间位置-小孩的高度，25只是一个修正值
    $("#boy").css({
        top: pathY - $("#boy").height() + 25
    });

    //动画切换到第三屏
    $("button").eq(0).click(function () {
        swipe.scrollTo($("#content").width() * 2, 3);
    });
    //小孩开始走路
    $("button").eq(1).click(function () {
        $("#boy").addClass("slow-walk");
    });
    $("button").eq(2).click(function () {
        $("#boy").transition({
            'left': $("#content").width() + 'px'
        }, 10000, 'linear', function () {
        });
    })
    //监听鼠标中键滑动
    $(document).on('mousewheel', function (event) {
        swipe.mousewheel(event, 50);
        $("#boy").addClass("slow-walk");
    });

</script>
</body>
</html>